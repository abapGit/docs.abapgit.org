import{u as O,g as te,h as se,i as P,j as le,k as ie,t as ue,l as re,m as D,n as w,p as ae,w as Y,q as s,v as ne,R as T,x as oe,y as de,z as ce,A as me,B as ge,C as he,D as pe,E as ve,F as fe,G as R,H as ye,I as ke,J as He,K as I,L as M,M as je}from"./app-Baw2R2NJ.js";const be=["/","/development-guide/","/user-guide/","/development-guide/api/","/development-guide/api/api.html","/development-guide/read-first/","/development-guide/read-first/changelog.html","/development-guide/read-first/contributing.html","/development-guide/read-first/guidelines.html","/development-guide/read-first/package-structure.html","/development-guide/read-first/versioning.html","/development-guide/serializers/","/development-guide/serializers/file-formats.html","/development-guide/serializers/overview.html","/development-guide/serializers/serializers.html","/development-guide/serializers/task-list.html","/development-guide/technical-details/","/development-guide/technical-details/docs.html","/development-guide/technical-details/technical-links.html","/development-guide/testing/","/development-guide/testing/ci.html","/development-guide/testing/debugging.html","/development-guide/testing/tests.html","/development-guide/user-interface/","/development-guide/user-interface/adding-icons.html","/development-guide/user-interface/developing-ui-css.html","/development-guide/user-interface/developing-ui-forms.html","/development-guide/user-interface/developing-ui-js.html","/development-guide/user-interface/developing-ui-tables.html","/development-guide/user-interface/developing-ui.html","/development-guide/user-interface/html-popups.html","/user-guide/getting-started/","/user-guide/getting-started/install.html","/user-guide/getting-started/troubleshooting.html","/user-guide/getting-started/ui-layout.html","/user-guide/getting-started/ui.html","/user-guide/getting-started/uninstall.html","/user-guide/getting-started/upgrade.html","/user-guide/other/","/user-guide/other/articles-and-presentations.html","/user-guide/other/logos.html","/user-guide/other/regular-backup.html","/user-guide/other/saplink.html","/user-guide/other/where-used.html","/user-guide/other/xml-mismatch.html","/user-guide/projects/","/user-guide/reference/","/user-guide/reference/abap-language-version.html","/user-guide/reference/apack.html","/user-guide/reference/authorizations.html","/user-guide/reference/data-config.html","/user-guide/reference/exits.html","/user-guide/reference/flow.html","/user-guide/reference/folders-filenames.html","/user-guide/reference/hotkeys.html","/user-guide/reference/icons.html","/user-guide/reference/namespaces.html","/user-guide/reference/note-analyzer.html","/user-guide/reference/packages.html","/user-guide/reference/supported.html","/user-guide/reference/translations.html","/user-guide/repo-settings/","/user-guide/repo-settings/background-mode.html","/user-guide/repo-settings/dot-abapgit.html","/user-guide/repo-settings/local.html","/user-guide/repo-settings/remote.html","/user-guide/repo-settings/stats.html","/user-guide/setup/","/user-guide/setup/sapgui.html","/user-guide/setup/settings-global.html","/user-guide/setup/settings-personal.html","/user-guide/setup/ssl-setup.html","/user-guide/setup/ssl-test.html","/user-guide/tools/","/user-guide/tools/database-util.html","/user-guide/tools/debug-info.html","/user-guide/tools/ie-dev-tools.html","/user-guide/tools/objects-to-files.html","/user-guide/tools/package-to-zip.html","/user-guide/tools/transport-to-zip.html","/user-guide/projects/offline/","/user-guide/projects/offline/export-zip.html","/user-guide/projects/offline/import-rfc.html","/user-guide/projects/offline/import-zip.html","/user-guide/projects/offline/install.html","/user-guide/projects/online/","/user-guide/projects/online/authentication.html","/user-guide/projects/online/contributing.html","/user-guide/projects/online/first-project.html","/user-guide/projects/online/install.html","/user-guide/projects/online/moving-package.html","/user-guide/projects/online/stage-commit.html","/user-guide/projects/online/update.html","/user-guide/projects/remove/","/user-guide/projects/remove/uninstall.html","/404.html"],we="SLIMSEARCH_QUERY_HISTORY",v=O(we,[]),Re=()=>{const{queryHistoryCount:l}=R,i=l>0;return{enabled:i,queryHistories:v,addQueryHistory:u=>{i&&(v.value=Array.from(new Set([u,...v.value.slice(0,l-1)])))},removeQueryHistory:u=>{v.value=[...v.value.slice(0,u),...v.value.slice(u+1)]}}},$=l=>be[l.id]+("anchor"in l?`#${l.anchor}`:""),xe="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:U}=R,f=O(xe,[]),Qe=()=>{const l=U>0;return{enabled:l,resultHistories:f,addResultHistory:i=>{if(l){const u={link:$(i),display:i.display};"header"in i&&(u.header=i.header),f.value=[u,...f.value.slice(0,U-1)]}},removeResultHistory:i=>{f.value=[...f.value.slice(0,i),...f.value.slice(i+1)]}}},qe=l=>{const i=me(),u=P(),x=ge(),a=D(0),k=w(()=>a.value>0),h=he([]);return pe(()=>{const{search:p,terminate:Q}=ve(),y=fe(o=>{const{resultsFilter:H=n=>n,querySplitter:A,suggestionsFilter:q,...S}=i.value;o?(a.value+=1,p(o,u.value,S).then(n=>H(n,o,u.value,x.value)).then(n=>{a.value-=1,h.value=n}).catch(n=>{console.warn(n),a.value-=1,a.value||(h.value=[])})):h.value=[]},R.searchDelay-R.suggestDelay,{maxWait:5e3});Y([l,u],([o])=>{y(o.join(" "))},{immediate:!0}),ye(()=>{Q()})}),{isSearching:k,results:h}};var Ce=te({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(l,{emit:i}){const u=se(),x=P(),a=le(ie),{enabled:k,addQueryHistory:h,queryHistories:p,removeQueryHistory:Q}=Re(),{enabled:y,resultHistories:o,addResultHistory:H,removeResultHistory:A}=Qe(),q=k||y,S=ue(l,"queries"),{results:n,isSearching:_}=qe(S),r=re({isQuery:!0,index:0}),m=D(0),g=D(0),E=w(()=>q&&(p.value.length>0||o.value.length>0)),C=w(()=>n.value.length>0),z=w(()=>n.value[m.value]||null),B=()=>{const{isQuery:e,index:t}=r;t===0?(r.isQuery=!e,r.index=e?o.value.length-1:p.value.length-1):r.index=t-1},G=()=>{const{isQuery:e,index:t}=r;t===(e?p.value.length-1:o.value.length-1)?(r.isQuery=!e,r.index=0):r.index=t+1},J=()=>{m.value=m.value>0?m.value-1:n.value.length-1,g.value=z.value.contents.length-1},K=()=>{m.value=m.value<n.value.length-1?m.value+1:0,g.value=0},V=()=>{g.value<z.value.contents.length-1?g.value+=1:K()},W=()=>{g.value>0?g.value-=1:J()},L=e=>e.map(t=>je(t)?t:s(t[0],t[1])),N=e=>{if(e.type==="customField"){const t=ke[e.index]||"$content",[d,b=""]=He(t)?t[x.value].split("$content"):t.split("$content");return e.display.map(c=>s("div",L([d,...c,b])))}return e.display.map(t=>s("div",L(t)))},j=()=>{m.value=0,g.value=0,i("updateQuery",""),i("close")},X=()=>k?s("ul",{class:"slimsearch-result-list"},s("li",{class:"slimsearch-result-list-item"},[s("div",{class:"slimsearch-result-title"},a.value.queryHistory),p.value.map((e,t)=>s("div",{class:["slimsearch-result-item",{active:r.isQuery&&r.index===t}],onClick:()=>{i("updateQuery",e)}},[s(I,{class:"slimsearch-result-type"}),s("div",{class:"slimsearch-result-content"},e),s("button",{class:"slimsearch-remove-icon",innerHTML:M,onClick:d=>{d.preventDefault(),d.stopPropagation(),Q(t)}})]))])):null,Z=()=>y?s("ul",{class:"slimsearch-result-list"},s("li",{class:"slimsearch-result-list-item"},[s("div",{class:"slimsearch-result-title"},a.value.resultHistory),o.value.map((e,t)=>s(T,{to:e.link,class:["slimsearch-result-item",{active:!r.isQuery&&r.index===t}],onClick:()=>{j()}},()=>[s(I,{class:"slimsearch-result-type"}),s("div",{class:"slimsearch-result-content"},[e.header?s("div",{class:"content-header"},e.header):null,s("div",e.display.map(d=>L(d)).flat())]),s("button",{class:"slimsearch-remove-icon",innerHTML:M,onClick:d=>{d.preventDefault(),d.stopPropagation(),A(t)}})]))])):null;return ae("keydown",e=>{if(l.isFocusing){if(C.value){if(e.key==="ArrowUp")W();else if(e.key==="ArrowDown")V();else if(e.key==="Enter"){const t=z.value.contents[g.value];h(l.queries.join(" ")),H(t),u.push($(t)),j()}}else if(y){if(e.key==="ArrowUp")B();else if(e.key==="ArrowDown")G();else if(e.key==="Enter"){const{index:t}=r;r.isQuery?(i("updateQuery",p.value[t]),e.preventDefault()):(u.push(o.value[t].link),j())}}}}),Y([m,g],()=>{var e;(e=document.querySelector(".slimsearch-result-list-item.active .slimsearch-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>s("div",{class:["slimsearch-result-wrapper",{empty:l.queries.length?!C.value:!E.value}],id:"slimsearch-results"},l.queries.length?_.value?s(ne,{hint:a.value.searching}):C.value?s("ul",{class:"slimsearch-result-list"},n.value.map(({title:e,contents:t},d)=>{const b=m.value===d;return s("li",{class:["slimsearch-result-list-item",{active:b}]},[s("div",{class:"slimsearch-result-title"},e||a.value.defaultTitle),t.map((c,ee)=>{const F=b&&g.value===ee;return s(T,{to:$(c),class:["slimsearch-result-item",{active:F,"aria-selected":F}],onClick:()=>{h(l.queries.join(" ")),H(c),j()}},()=>[c.type==="text"?null:s(c.type==="title"?oe:c.type==="heading"?de:ce,{class:"slimsearch-result-type"}),s("div",{class:"slimsearch-result-content"},[c.type==="text"&&c.header?s("div",{class:"content-header"},c.header):null,s("div",N(c))])])})])})):a.value.emptyResult:q?E.value?[X(),Z()]:a.value.emptyHistory:a.value.emptyResult)}});export{Ce as default};
